<!DOCTYPE html>
<html>
<head>
    <title>BOOKING</title>
    <link rel="stylesheet" href="STYLE.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header>
        <h1>TROOPS TRAVELS</h1>
        <h2>BOOKING</h2>
        <nav>
            <a href="HOMEPAGE.html">Home</a>
            <a href="PACKAGES.html">Packages</a>
            <a href="BOOKING.html">Booking</a>
            <a href="GALLERY.html">Gallery</a>
            <a href="CONTACT.html">Contact Us</a>
        </nav>
    </header>
    <main>
        <form id="bookingForm">
            <label for="package">Select Package:</label>
            <select id="package" required>
                <option value="">--Choose--</option>
                <option value="52953">ENCHANTED NIGHTS (Singapore)</option>
                <option value="22875">CULTURAL PARADISE (Bali)</option>
                <option value="131669">RISING SUN (Japan)</option>
                <option value="136603">EUROPEAN TRAIL (Paris)</option>
                <option value="49999">BEACHY WAVES (Goa)</option>
            </select>

            <label for="checkIn">Check-In:</label>
            <input type="date" id="checkIn" required>

            <label for="checkOut">Check-Out:</label>
            <input type="date" id="checkOut" required>

            <label for="guests">Number of Guests:</label>
            <input type="number" id="guests" min="1" required>

            <label for="promo">Promo Code:</label>
            <input type="text" id="promo" placeholder="Optional">

            <p id="totalPrice">Estimated Price: -</p>

            <button type="submit">Submit</button>
        </form>
    </main>

    <script>
        let form = document.getElementById("bookingForm");
        let packageSelect = document.getElementById("package");
        let checkIn = document.getElementById("checkIn");
        let checkOut = document.getElementById("checkOut");
        let guests = document.getElementById("guests");
        let promo = document.getElementById("promo");
        let totalPriceText = document.getElementById("totalPrice");
        let submitBtn = form.querySelector("button");

        function calculatePrice() {
            if (!packageSelect.value || !checkIn.value || !checkOut.value || !guests.value) {
                totalPriceText.textContent = "Estimated Price: -";
                submitBtn.disabled = true;
                return;
            }

            let basePrice = parseInt(packageSelect.value);
            let inDate = new Date(checkIn.value);
            let outDate = new Date(checkOut.value);
            let nights = (outDate - inDate) / (1000 * 60 * 60 * 24);

            if (isNaN(nights) || nights <= 0) {
                totalPriceText.textContent = "Invalid dates!";
                submitBtn.disabled = true;
                return;
            }

            let total = basePrice * nights;

            if (parseInt(guests.value) > 2) {
                total *= 1.2; // +20%
            }

            switch (promo.value.trim().toUpperCase()) {
                case "EARLYBIRD":
                    total *= 0.9;
                    break;
                case "FESTIVE":
                    total *= 0.85;
                    break;
            }

            totalPriceText.textContent = "Estimated Price: â‚¹" + Math.round(total);
            submitBtn.disabled = false;
        }

        form.addEventListener("input", calculatePrice);
        form.addEventListener("submit", function(e) {
            if (submitBtn.disabled) {
                e.preventDefault();
                alert("Please fill all required fields correctly.");
            }
        });

        let links = document.querySelectorAll("nav a");
        links.forEach(link => {
            if (link.href.includes("BOOKING.html")) {
                link.classList.add("active");
            }
        });
    </script>
</body>
</html>
